var meraApp = angular.module('<%= appName %>', ['ng-admin']);

// declare a function to run when the module bootstraps (during the 'config' phase)
meraApp.config(['RestangularProvider',
  function(RestangularProvider) {
    RestangularProvider.addFullRequestInterceptor(function(element, operation, what, url, headers, params) {
      if (operation == "getList") {
        // custom filters
        if (params._filters) {
          for (var filter in params._filters) {
            params[filter] = params._filters[filter];
          }
          delete params._filters;
        }
      }
      return {
        params: params
      };
    });
  }
]);

meraApp.config(['NgAdminConfigurationProvider',
  function(nga) {
    // create an admin application
    var admin = nga.application(<%= title %>).baseApiUrl('<%= baseApiUrl %>');

    $mera.entityGenerators.forEach(function(generator) {
      admin.addEntity(generator(nga));
    });

    // attach the admin application to the DOM and execute it
    nga.configure(admin);
  }
]);
